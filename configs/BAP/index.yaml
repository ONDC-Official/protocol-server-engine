flows:
  - summary: Personal Loan [2.0.0]
    id: personal-loan-flow-1
    domain: ONDC:FIS12
    shouldDispaly: true
    sessionData:
      version: "2.0.0"
      collectedBy: BAP
      paymentCollectedBy: BPP
      bankAccountNumber: "123456789"
      virtualPaymentAddress: "adasd@okiciic"
      bankCode: "fj3jf9ij3f02"
    protocol:
      $ref: ./personal-loan-flow-1/protocolMapping.yaml#/protocol
    calls:
      $ref: ./personal-loan-flow-1/calls.yaml#/calls


  - summary: Missed-EMI Payment
    id: invoice-loan-missed-emi-flow-1
    shouldDispaly: false
    protocol:
      $ref: ./invoice-loan-missed-emi-flow-1/protocolMapping.yaml#/protocol
    calls:
      $ref: ./invoice-loan-missed-emi-flow-1/calls.yaml#/calls

  - summary: Invoice Based Loans
    id: invoice-loan-flow-1
    domain: ONDC:FIS12
    shouldDispaly: true
    sessionData:
      loanCategaory: INVOICE_BASED_LOAN
      version: "2.1.0"
      collectedBy: BAP
      paymentCollectedBy: BPP
      bankAccountNumber: "123456789"
      virtualPaymentAddress: "adasd@okiciic"
      bankCode: "fj3jf9ij3f2"
      paymentTagsSearch:
        BUYER_FINDER_FEES:
          BUYER_FINDER_FEES_TYPE: percent-annualized
          BUYER_FINDER_FEES_PERCENTAGE: "1"
        SETTLEMENT_TERMS:
          DELAY_INTEREST: 2.5
          STATIC_TERMS: "https://bap.credit.becknprotocol.io/personal-banking/loans/personal-loan"
          OFFLINE_CONTRACT: "true"
    protocol:
      $ref: ./invoice-loan-flow-1/protocolMapping.yaml#/protocol
    calls:
      $ref: ./invoice-loan-flow-1/calls.yaml#/calls

  - summary: Invoice Based Loans Seller
    ui: true
    id: invoice-loan-seller-flow-1
    createSessionAtBuyer: true
    domain: ONDC:FIS12
    shouldDispaly: true
    sessionData:
      loanCategaory: INVOICE_BASED_LOAN
      version: "2.1.0"
      collectedBy: BAP
      paymentCollectedBy: BPP
      bankAccountNumber: "123456789"
      virtualPaymentAddress: "adasd@okiciic"
      bankCode: "fj3jf9ij3f02"
      paymentTagsSearch:
        BUYER_FINDER_FEES:
          BUYER_FINDER_FEES_TYPE: percent-annualized
          BUYER_FINDER_FEES_PERCENTAGE: "1"
        SETTLEMENT_TERMS:
          DELAY_INTEREST: 2.5
          STATIC_TERMS: "https://bap.credit.becknprotocol.io/personal-banking/loans/personal-loan"
          OFFLINE_CONTRACT: "true"
    protocol:
      $ref: ./invoice-loan-seller-flow-1/protocolMapping.yaml#/protocol
    calls:
      $ref: ./invoice-loan-seller-flow-1/calls.yaml#/calls


flow_selector:
  search:
    default:
      config_id: "default-flow"
    metro:
      condition:
        operation:
          type: AND
          input:
            value:
              - operation:
                  type: EQUAL
                  title: Check search message code
                  input:
                    value:
                      - operation:
                          type: READ
                          input:
                            value: "req_body.message.intent.category.descriptor.code"
                      - INVOICE_BASED_LOAN
      config_id: "invoice-loan-seller-flow-1"